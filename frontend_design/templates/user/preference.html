<!DOCTYPE html>
{% load static %}
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>취향 분석 - MOOD ON</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="{% static 'js/common.js' %}"></script>
</head>

<body class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-yellow-50 overflow-y-scroll">
    <!-- Header -->
    <div
        class="border-b border-blue-100 px-5 py-3.5 flex items-center justify-between bg-white/80 backdrop-blur-sm shadow-sm fixed top-0 left-0 right-0 z-50">
        <div class="flex items-center gap-3">
            <button onclick="window.location.href='/chat/'"
                class="flex items-center gap-2.5 hover:opacity-80 transition-opacity">
                <div
                    class="w-9 h-9 bg-gradient-to-br from-blue-400 to-blue-300 rounded-full flex items-center justify-center shadow-md">
                    <i data-lucide="lamp" class="text-white w-[18px] h-[18px]"></i>
                </div>
                <span
                    class="text-[20px] font-medium leading-none bg-gradient-to-r from-blue-600 to-blue-400 bg-clip-text text-transparent select-none">
                    MOOD ON
                </span>
            </button>
        </div>

        <!-- Navigation -->
        <div class="flex items-center gap-2" id="header-nav">
            <!-- Injected by JS -->
        </div>
    </div>

    <main class="pt-32 pb-16">
        <div class="max-w-4xl mx-auto px-6">
            <!-- Step 1: Gender -->
            <div id="step-1" class="space-y-12">
                <h1 class="text-4xl mb-16 text-center">당신에 대해 알려주세요!</h1>
                <div>
                    <h2 class="text-xl mb-6 text-center">당신의 성별은 무엇인가요?</h2>
                    <div class="w-full max-w-[520px] mx-auto">
                        <div class="flex gap-4">
                            <button onclick="setGender('여성')" id="btn-gender-female"
                                class="w-full py-3 rounded-full border-2 border-blue-200 hover:border-blue-400 transition-colors">여성</button>
                            <button onclick="setGender('남성')" id="btn-gender-male"
                                class="w-full py-3 rounded-full border-2 border-blue-200 hover:border-blue-400 transition-colors">남성</button>
                            <button onclick="setGender('선택 안함')" id="btn-gender-none"
                                class="w-full py-3 rounded-full border-2 border-blue-200 hover:border-blue-400 transition-colors">선택
                                안함</button>
                        </div>
                    </div>
                </div>
                <div class="w-full max-w-[520px] mx-auto">
                    <div class="pt-8 flex gap-3">
                        <button onclick="window.location.href='/chat/'"
                            class="w-full py-3 border-2 border-blue-500 text-blue-600 rounded-full hover:bg-blue-50 transition-colors">채팅으로</button>
                        <button id="btn-step-1-next" disabled
                            class="w-full py-3 bg-gradient-to-r from-blue-500 to-blue-400 text-white rounded-full hover:from-blue-600 hover:to-blue-500 transition-all shadow-lg disabled:bg-gray-300 disabled:cursor-not-allowed disabled:bg-none disabled:text-gray-500">다음
                            단계 &gt;</button>
                    </div>
                </div>
            </div>

            <!-- Step 2: Birthdate -->
            <div id="step-2" class="hidden space-y-12">
                <h1 class="text-4xl mb-16 text-center">당신에 대해 알려주세요!</h1>
                <div>
                    <h2 class="text-xl mb-6 text-center">생년월일을 알려주세요.</h2>
                    <p class="text-sm text-gray-500 mb-4 text-center">YYYYMMDD 형식으로 8자리 숫자를 입력해주세요</p>
                    <div class="flex justify-center">
                        <input type="text" id="birthdate-input" placeholder="예: 19900101" maxlength="8"
                            class="w-[520px] h-[52.2px] px-6 border-2 border-blue-200 rounded-full focus:outline-none focus:border-blue-400 text-center">
                    </div>
                    <p id="birthdate-error" class="text-red-500 text-sm mt-2 text-center hidden"></p>
                </div>
                <div class="w-full max-w-[520px] mx-auto">
                    <div class="pt-8 flex gap-3">
                        <button onclick="showStep(1)"
                            class="w-full py-3 border-2 border-blue-500 text-blue-600 rounded-full hover:bg-blue-50 transition-colors">이전</button>
                        <button id="btn-step-2-next" disabled
                            class="w-full py-3 bg-gradient-to-r from-blue-500 to-blue-400 text-white rounded-full hover:from-blue-600 hover:to-blue-500 transition-all shadow-lg disabled:bg-gray-300 disabled:cursor-not-allowed disabled:bg-none disabled:text-gray-500">다음
                            단계 &gt;</button>
                    </div>
                </div>
            </div>

            <!-- Step 3: MBTI -->
            <div id="step-3" class="hidden space-y-12">
                <h1 class="text-4xl mb-16 text-center">당신에 대해 알려주세요!</h1>
                <div class="w-full max-w-[520px] mx-auto">
                    <h2 class="text-xl mb-6 text-center">당신의 MBTI는 어떤 타입인가요?</h2>
                    <div class="space-y-4">
                        <div class="flex gap-4 justify-center">
                            <button onclick="setMbti(0, 'E')" id="btn-mbti-e"
                                class="w-full px-8 py-3 rounded-full border-2 border-blue-200 hover:border-blue-400 transition-colors">E</button>
                            <button onclick="setMbti(1, 'S')" id="btn-mbti-s"
                                class="w-full px-8 py-3 rounded-full border-2 border-blue-200 hover:border-blue-400 transition-colors">S</button>
                            <button onclick="setMbti(2, 'T')" id="btn-mbti-t"
                                class="w-full px-8 py-3 rounded-full border-2 border-blue-200 hover:border-blue-400 transition-colors">T</button>
                            <button onclick="setMbti(3, 'J')" id="btn-mbti-j"
                                class="w-full px-8 py-3 rounded-full border-2 border-blue-200 hover:border-blue-400 transition-colors">J</button>
                        </div>
                        <div class="flex gap-4 justify-center">
                            <button onclick="setMbti(0, 'I')" id="btn-mbti-i"
                                class="w-full px-8 py-3 rounded-full border-2 border-blue-200 hover:border-blue-400 transition-colors">I</button>
                            <button onclick="setMbti(1, 'N')" id="btn-mbti-n"
                                class="w-full px-8 py-3 rounded-full border-2 border-blue-200 hover:border-blue-400 transition-colors">N</button>
                            <button onclick="setMbti(2, 'F')" id="btn-mbti-f"
                                class="w-full px-8 py-3 rounded-full border-2 border-blue-200 hover:border-blue-400 transition-colors">F</button>
                            <button onclick="setMbti(3, 'P')" id="btn-mbti-p"
                                class="w-full px-8 py-3 rounded-full border-2 border-blue-200 hover:border-blue-400 transition-colors">P</button>
                        </div>
                    </div>
                </div>
                <div class="w-full max-w-[520px] mx-auto">
                    <div class="pt-8 flex gap-3">
                        <button onclick="showStep(2)"
                            class="w-full py-3 border-2 border-blue-500 text-blue-600 rounded-full hover:bg-blue-50 transition-colors">이전</button>
                        <button id="btn-step-3-next" disabled
                            class="w-full py-3 bg-gradient-to-r from-blue-500 to-blue-400 text-white rounded-full hover:from-blue-600 hover:to-blue-500 transition-all shadow-lg disabled:bg-gray-300 disabled:cursor-not-allowed disabled:bg-none disabled:text-gray-500">다음
                            단계 &gt;</button>
                    </div>
                </div>
            </div>

            <!-- Step 4: Style Selection -->
            <div id="step-4" class="hidden space-y-5">
                <div class="text-center">
                    <h1 class="text-4xl mb-4">당신의 취향을 알려주세요!</h1>
                    <p class="text-gray-600">마음에 드는 사진을 1개~3개까지 골라주세요 :)</p>
                </div>
                <div class="w-full max-w-[520px] mx-auto">
                    <div id="style-grid" class="grid grid-cols-4 gap-3">
                        <!-- Injected by JS -->
                    </div>
                    <div class="pt-6 flex gap-3">
                        <button onclick="showStep(3)"
                            class="w-full py-3 border-2 border-blue-500 text-blue-600 rounded-full hover:bg-blue-50 transition-colors">이전</button>
                        <button id="btn-complete" disabled
                            class="w-full py-3 bg-gradient-to-r from-blue-500 to-blue-400 text-white rounded-full hover:from-blue-600 hover:to-blue-500 transition-all shadow-lg disabled:bg-gray-300 disabled:cursor-not-allowed disabled:bg-none disabled:text-gray-500">다음
                            단계 &gt;</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="{% static 'js/preference.js' %}"></script>
</body>

</html>